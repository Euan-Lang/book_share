{% extends 'bookShare/base.html' %}
{% load staticfiles %}

{% block title %}
    Book Info
{% endblock %}
{%block javascript%}
<script>
    var bookId = '{{book.book_id}}';
    var isInterested = {{interested|lower}};
</script>
<script src = {% static 'js/ajax-register-interest.js' %}></script>
{%endblock%}
{% block content %}
    <div class="w-5/12 shadow-lg rounded-xl p-11 my-5">
         <h1 class="text-5xl font-semibold text-black mb-11 text-center">{{book.title}}</h1>
    
    {% if book.cover_image %}
        <img src="{{book.cover_image.url}}" height = 200px width = 200px> </img><br/>
    {% else %}
        <img src="{% static 'images/default_book.jpg' %}" height = 200px width = 200px> </img><br/>
    {% endif %}
    Author: {{book.author}}<br/>
    Publisher: {{book.publisher}}<br/>
    ISBN: {{book.isbn}}<br/>
    Genre: {{book.genre}}<br/>
    Uploaded: {{book.upload_time}} by <a href = "{% url 'bookShare:profile' book.user_profile.user.username %}">{{book.user_profile.user.username}}</a><br/><br/>
   
    {% if user.username == book.user_profile.user.username %}
        <a href = "{% url 'bookShare:edit_book' book.book_id %}" class="btn-primary mb-6"> Edit </a>
        
        <a href = "{% url 'bookShare:interested' book.book_id %}" class="btn-primary mb-6"> View Interest Users </a>
    {% elif user.is_authenticated and interested != "invalid" %}
        <button class="btn-primary mb-6" id = "change-interest-button">{% if interested %}Remove Interest{% else %}Register Interest{% endif %}</button>
    {% endif %}
        Map:
        {% include "bookShare/components/map.html" %}
{% endblock %}
